import{a as D,R as h,u as F,j as e,H as $,L as E}from"./app-RUJaeA1L.js";import{A as S}from"./AuthenticatedLayout-DKLa7V6W.js";import{R as L}from"./quill.snow-CV6CZstM.js";import"./ApplicationLogo-DcHCFBPb.js";import"./transition-ynxf42_C.js";function Q({portfolio:a,portfolio_types:g,portfolio_details_images:v}){const{baseUrl:p}=D().props,[x,_]=h.useState(null),{data:l,setData:n,post:f,processing:N,errors:t}=F({title:a.title||"",sort_order:a.sort_order||"",status:a.status==="active"?"active":"inactive",portfolio_type_id:a.portfolio_type_id||"",short_description:a.short_description||"",client_name:a.client_name||"",project_url:a.project_url||"",description:a.description||"",image_url:null,details_images:[],deleted_details_images:[]}),[m,j]=h.useState([]),[d,y]=h.useState(v||[]),[b,c]=h.useState("");function w(s){s.preventDefault(),f(route("portfolios.update",a.id))}const o=s=>{const{name:i,value:r,type:I,files:u}=s.target;I==="file"?(n(i,u[0]??null),i==="image_url"&&_(u[0]?URL.createObjectURL(u[0]):null)):n(i,r)},k=s=>{const i=Array.from(s.target.files);n("details_images",i),j(i.map(r=>URL.createObjectURL(r))),d.length+i.length>0&&c("")},R=s=>{const i=[...l.details_images];i.splice(s,1),n("details_images",i);const r=[...m];r.splice(s,1),j(r),d.length+r.length===0?c("At least one details image is required."):c("")},P=s=>{n("deleted_details_images",[...l.deleted_details_images,s]);const i=d.filter(r=>r.id!==s);y(i),i.length+m.length===0?c("At least one details image is required."):c("")},C=d.length+m.length>0;return e.jsxs(S,{header:e.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800",children:"Edit Portfolio"}),children:[e.jsx($,{title:"Edit Portfolio"}),e.jsx("div",{className:"py-6",children:e.jsx("div",{className:"mx-auto max-w-7xl sm:px-6 lg:px-8",children:e.jsx("div",{className:"overflow-hidden rounded bg-white p-6 shadow-sm",children:e.jsxs("form",{onSubmit:w,encType:"multipart/form-data",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700",children:"Title"}),e.jsx("input",{type:"text",name:"title",id:"title",value:l.title,onChange:o,className:"mt-1 block w-full rounded border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"}),t.title&&e.jsx("div",{className:"mt-1 text-sm text-red-600",children:t.title})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"sort_order",className:"block text-sm font-medium text-gray-700",children:"Sort Order"}),e.jsx("input",{type:"number",name:"sort_order",id:"sort_order",value:l.sort_order,onChange:o,className:"mt-1 block w-full rounded border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",min:"1"}),t.sort_order&&e.jsx("div",{className:"mt-1 text-sm text-red-600",children:t.sort_order})]}),e.jsxs("div",{className:"form-group mb-3",children:[e.jsxs("label",{htmlFor:"portfolio_type_id",children:["Portfolio Type"," ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("select",{className:`form-control ${t.portfolio_type_id?"is-invalid":""}`,id:"portfolio_type_id",name:"portfolio_type_id",value:l.portfolio_type_id||"",onChange:o,required:!0,children:[e.jsx("option",{value:"",children:"Select Portfolio Type"}),g&&g.map(s=>e.jsx("option",{value:s.id,children:s.title},s.id))]}),t.portfolio_type_id&&e.jsx("div",{className:"invalid-feedback",children:t.portfolio_type_id})]}),e.jsxs("div",{className:"form-group mb-3",children:[e.jsxs("label",{htmlFor:"short_description",children:["Short Description"," ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"text",className:`form-control ${t.short_description?"is-invalid":""}`,id:"short_description",name:"short_description",placeholder:"Enter short description",value:l.short_description||"",onChange:o,required:!0}),t.short_description&&e.jsx("div",{className:"invalid-feedback",children:t.short_description})]}),e.jsxs("div",{className:"form-group mb-3",children:[e.jsx("label",{htmlFor:"client_name",children:"Client Name"}),e.jsx("input",{type:"text",className:`form-control ${t.client_name?"is-invalid":""}`,id:"client_name",name:"client_name",placeholder:"Enter client name",value:l.client_name||"",onChange:o}),t.client_name&&e.jsx("div",{className:"invalid-feedback",children:t.client_name})]}),e.jsxs("div",{className:"form-group mb-3",children:[e.jsx("label",{htmlFor:"project_url",children:"Project URL"}),e.jsx("input",{type:"text",className:`form-control ${t.project_url?"is-invalid":""}`,id:"project_url",name:"project_url",placeholder:"Enter project URL",value:l.project_url||"",onChange:o}),t.project_url&&e.jsx("div",{className:"invalid-feedback",children:t.project_url})]}),e.jsxs("div",{className:"form-group mb-3",children:[e.jsxs("label",{htmlFor:"description",children:["Description"," ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx(L,{theme:"snow",value:l.description,onChange:s=>n("description",s),className:`${t.description?"is-invalid":""}`}),t.description&&e.jsx("div",{className:"invalid-feedback d-block",children:t.description})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700",children:"Status"}),e.jsxs("select",{name:"status",id:"status",value:l.status,onChange:o,className:"mt-1 block w-full rounded border-gray-300 bg-white shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"})]}),t.status&&e.jsx("div",{className:"mt-1 text-sm text-red-600",children:t.status})]}),e.jsxs("div",{className:"form-group mb-3",children:[e.jsx("label",{htmlFor:"image_url",className:"form-label",children:"Project Image"}),e.jsx("input",{type:"file",id:"image_url",name:"image_url",accept:".jpg,.jpeg,.png,.svg",onChange:o,className:`form-control ${t.image_url?"is-invalid":""}`}),t.image_url&&e.jsx("div",{className:"invalid-feedback d-block",children:t.image_url}),e.jsx("div",{className:"mt-2",children:x?e.jsx("img",{src:x,alt:"Project Preview",style:{width:120,height:120,objectFit:"cover",borderRadius:8}}):a.image_url&&e.jsx("img",{src:`${p}/storage/app/public/${a.image_url}`,alt:"Project",style:{width:120,height:120,objectFit:"cover",borderRadius:8}})})]}),e.jsxs("div",{className:"form-group mb-3",children:[e.jsx("label",{children:"Details Images"}),e.jsx("input",{type:"file",id:"details_images",name:"details_images",accept:".jpg,.jpeg,.png,.svg",multiple:!0,onChange:k,className:`form-control ${t.details_images?"is-invalid":""}`}),t.details_images&&e.jsx("div",{className:"invalid-feedback d-block",children:t.details_images}),e.jsxs("div",{className:"d-flex flex-wrap gap-2 mb-2 mt-3",children:[d.map(s=>e.jsxs("div",{style:{position:"relative"},children:[e.jsx("img",{src:`${p}/storage/app/public/${s.image_url}`,alt:"",style:{width:80,height:80,objectFit:"cover",borderRadius:8}}),e.jsx("button",{type:"button",onClick:()=>P(s.id),style:{position:"absolute",top:2,right:2,background:"rgba(255,0,0,0.7)",color:"white",border:"none",borderRadius:"50%",width:24,height:24,cursor:"pointer"},title:"Delete",children:"×"})]},s.id)),m.map((s,i)=>e.jsxs("div",{style:{position:"relative"},children:[e.jsx("img",{src:s,alt:`Details Preview ${i+1}`,style:{width:80,height:80,objectFit:"cover",borderRadius:8}}),e.jsx("button",{type:"button",onClick:()=>R(i),style:{position:"absolute",top:2,right:2,background:"rgba(255,0,0,0.7)",color:"white",border:"none",borderRadius:"50%",width:24,height:24,cursor:"pointer"},title:"Remove",children:"×"})]},"new-"+i))]}),b&&e.jsx("div",{className:"text-danger mt-2",children:b})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(E,{href:route("portfolios.index"),className:"inline-flex items-center rounded border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:N||!C,className:"inline-flex justify-center rounded bg-indigo-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-indigo-700 disabled:opacity-50",children:"Update"})]})]})})})})]})}export{Q as default};
